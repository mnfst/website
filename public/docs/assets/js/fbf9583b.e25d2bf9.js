"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[492],{8029:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>a,frontMatter:()=>d,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"webhooks","title":"Webhooks","description":"Introduction","source":"@site/content/webhooks.md","sourceDirName":".","slug":"/webhooks","permalink":"/docs/webhooks","draft":false,"unlisted":false,"editUrl":"https://github.com/mnfst/docs/blob/master/webhooks.md","tags":[],"version":"current","frontMatter":{"id":"webhooks"},"sidebar":"docSidebar","previous":{"title":"Endpoints","permalink":"/docs/endpoints"},"next":{"title":"Middlewares","permalink":"/docs/middlewares"}}');var s=t(4848),o=t(8453);const d={id:"webhooks"},i="Webhooks",c={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Webhook params",id:"webhook-params",level:2},{value:"Webhook body",id:"webhook-body",level:2},{value:"Hook events",id:"hook-events",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Webhooks"})," are a way for an app to send automated real-time notifications to another app when a specific ",(0,s.jsx)(n.a,{href:"/docs/webhooks#hook-events",children:"event"})," occurs. In Manifest, there are 6 predefined events where you can hook HTTP requests."]}),"\n",(0,s.jsx)(n.p,{children:"Webhooks are useful to connect other applications or to trigger a micro-service like notifying someone or updating a file."}),"\n",(0,s.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="manifest/backend.yml"',children:"entities:\n  # You can attach one or several webhooks to each entity event.\n  Cat \ud83d\ude3a:\n    properties:\n      - name\n    hooks:\n      beforeCreate:\n        - { url: 'https://my-webhook.com' }\n\n  Dog \ud83d\udc36:\n    properties:\n      - name\n    hooks:\n      afterDelete:\n        # Pass .env variables with ${} interpolation.\n        - {\n            url: 'https://another-webhook.com',\n            headers: { authorization: 'Bearer ${API_KEY}' }\n          }\n        # Specific HTTP method.\n        - { url: 'https://another-one.com', method: 'PATCH' }\n"})}),"\n",(0,s.jsx)(n.h2,{id:"webhook-params",children:"Webhook params"}),"\n",(0,s.jsx)(n.p,{children:"You can pass arguments using the long syntax:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"url*"})}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"The URL of your webhook"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"method"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"POST"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.em,{children:"HTTP Method"})}),(0,s.jsx)(n.td,{children:"The HTTP method of the request"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"headers"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{}"})}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsxs)(n.td,{children:["Optional headers of the request. Use ",(0,s.jsx)(n.code,{children:"${MY_DOTENV_VAR}"})," syntax to use dotenv variables"]})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Available HTTP Methods are ",(0,s.jsx)(n.code,{children:"GET"}),", ",(0,s.jsx)(n.code,{children:"POST"}),", ",(0,s.jsx)(n.code,{children:"PUT"}),", ",(0,s.jsx)(n.code,{children:"PATCH"}),", and ",(0,s.jsx)(n.code,{children:"DELETE"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"Manifest does not enforce HTTP request success or failure; the lifecycle process continues regardless."})}),"\n",(0,s.jsx)(n.h2,{id:"webhook-body",children:"Webhook body"}),"\n",(0,s.jsxs)(n.p,{children:["Manifest attaches a ",(0,s.jsx)(n.strong,{children:"JSON body"})," with key information about the record concerned to the webhook HTTP request."]}),"\n",(0,s.jsxs)(n.p,{children:["The main structure of the body of the triggered HTTP requests will remain the same and only the ",(0,s.jsx)(n.code,{children:"record"})," value will change: on ",(0,s.jsx)(n.em,{children:"before"})," events the ",(0,s.jsx)(n.code,{children:"record"})," will contain your payload, whereas in ",(0,s.jsx)(n.em,{children:"after"})," requests, the ",(0,s.jsx)(n.code,{children:"record"})," value will reflect the item after the operation."]}),"\n",(0,s.jsx)(n.p,{children:"This is the structure of the body:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="HTTP request body (content-type is application/json)"',children:'{\n  "event": "beforeUpdate",\n  "createdAt": "2025-01-22T13:38:48.399Z",\n  "entity": "posts",\n  "record": {\n    "title": "my title",\n    "content": "my content"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"hook-events",children:"Hook events"}),"\n",(0,s.jsxs)(n.p,{children:["This is the list and description of the 6 hook events available. All of them are related to an ",(0,s.jsx)(n.a,{href:"/docs/entities",children:"entity"}),"."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Name"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"beforeCreate"})}),(0,s.jsx)(n.td,{children:"Before creating a record"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"afterCreate"})}),(0,s.jsx)(n.td,{children:"After creating a record"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"beforeUpdate"})}),(0,s.jsx)(n.td,{children:"Before updating a record"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"afterUpdate"})}),(0,s.jsx)(n.td,{children:"After updating a record"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"beforeDelete"})}),(0,s.jsx)(n.td,{children:"Before deleting a record"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"afterDelete"})}),(0,s.jsx)(n.td,{children:"After deleting a record"})]})]})]})]})}function a(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>i});var r=t(6540);const s={},o=r.createContext(s);function d(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);