"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[58],{4100:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"endpoints","title":"Endpoints","description":"Introduction","source":"@site/content/endpoints.md","sourceDirName":".","slug":"/endpoints","permalink":"/docs/endpoints","draft":false,"unlisted":false,"editUrl":"https://github.com/mnfst/docs/blob/master/endpoints.md","tags":[],"version":"current","frontMatter":{"id":"endpoints","title":"Endpoints"},"sidebar":"docSidebar","previous":{"title":"Authentication","permalink":"/docs/authentication"},"next":{"title":"Webhooks","permalink":"/docs/webhooks"}}');var i=t(4848),r=t(8453);const d={id:"endpoints",title:"Endpoints"},o="Endpoints",c={},a=[{value:"Introduction",id:"introduction",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Endpoint params",id:"endpoint-params",level:2},{value:"Manipulate data with the backend SDK",id:"manipulate-data-with-the-backend-sdk",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"endpoints",children:"Endpoints"})}),"\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(n.p,{children:"A custom endpoint is a user-defined API route that executes specific logic on the backend. Unlike built-in routes, custom endpoints allow you to control how data is processed, retrieved, or modified in response to client requests."}),"\n",(0,i.jsxs)(n.p,{children:["For example, you can define an endpoint like ",(0,i.jsx)(n.code,{children:"/competitors/:id/increase"})," that directly increments the score of a given competitor."]}),"\n",(0,i.jsx)(n.p,{children:"Custom endpoints in Manifest follow a simple structure where you define:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"A path (path):"})," The URL where the endpoint can be accessed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"A method (method):"})," The type of HTTP request (GET, POST, etc.)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"A handler (handler):"})," The JavaScript function that processes the request."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,i.jsxs)(n.p,{children:['This is an example of a simple endpoint that returns a "Hello world from my new endpoint !" message when requesting ',(0,i.jsx)(n.code,{children:"GET /endpoints/hello-world"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="manifest/backend.yml"',children:"endpoints:\n  helloWorld:\n    path: /hello-world\n    method: GET\n    handler: helloWorld\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="manifest/handlers/helloWorld.js"',children:"module.exports = async (req, res) => {\n  res.json({ message: 'Hello world from my new endpoint!' })\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Manifest handlers are basically ",(0,i.jsx)(n.a,{href:"https://expressjs.com/en/guide/using-middleware.html",children:"ExpressJS middlewares"})," exposed with the ",(0,i.jsx)(n.a,{href:"/docs/crud#using-the-javascript-sdk",children:"Manifest SDK"})," to help you work with your data."]}),"\n",(0,i.jsxs)(n.p,{children:["Place the handler file in the ",(0,i.jsx)(n.code,{children:"/manifest/handlers"})," folder. For example, if the handler is ",(0,i.jsx)(n.code,{children:"helloWorld"}),", the file should be ",(0,i.jsx)(n.code,{children:"helloWorld.js"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["You can choose to set a different folder for handlers adding the ",(0,i.jsx)(n.code,{children:"MANIFEST_HANDLERS_FOLDER"})," variable in your ",(0,i.jsx)(n.code,{children:".env"})," file."]})}),"\n",(0,i.jsx)(n.h2,{id:"endpoint-params",children:"Endpoint params"}),"\n",(0,i.jsx)(n.p,{children:"Each endpoint can be defined in the YAML file with the following values:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"path*"})}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsxs)(n.td,{children:["The path of your endpoint. Use the ",(0,i.jsx)(n.code,{children:":var"})," syntax for route params. Ex: ",(0,i.jsx)(n.code,{children:"users/:id/upvote"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"method*"})}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"HttpMethod"})}),(0,i.jsx)(n.td,{children:'The HTTP request method: "GET", "POST", "PATCH", "PUT" or "DELETE"'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"handler*"})}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"The name of the handler function triggered"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"policies*"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"[]"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"Policy[]"})}),(0,i.jsxs)(n.td,{children:["The ",(0,i.jsx)(n.a,{href:"/docs/authentication#access-policies",children:"access policies"})," that restrict the access of the endpoint"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"description"})}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Optional description for your endpoint"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"manipulate-data-with-the-backend-sdk",children:"Manipulate data with the backend SDK"}),"\n",(0,i.jsxs)(n.p,{children:["The next thing you may want to do is to ",(0,i.jsx)(n.strong,{children:"read and write data from your app"}),". This can be done using the Manifest backend SDK that shares the same CRUD and upload functions as the ",(0,i.jsx)(n.a,{href:"http://localhost:3000/docs/javascript-sdk",children:"JS SDK"})," for the front-end."]}),"\n",(0,i.jsxs)(n.p,{children:["Take the following example of a ",(0,i.jsx)(n.code,{children:"backend.yml"})," file of a ",(0,i.jsx)(n.strong,{children:"leaderboard"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="manifest/backend.yml"',children:"name: Leaderboard app \ud83c\udfc5\n\nentities:\n  Competitor:\n    properties:\n      - name\n      - { name: score, type: number }\n\nendpoints:\n  increaseScore:\n    description: Adds 1 to the competitor score.\n    path: /competitors/:id/increase\n    method: POST\n    handler: increaseScore\n"})}),"\n",(0,i.jsxs)(n.p,{children:["We can now add the handler in the ",(0,i.jsx)(n.code,{children:"/manifest/handlers"})," folder:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="manifest/handlers/increaseScore.js"',children:"module.exports = async (req, res, manifest) => {\n  // Get the requested competitor with the Manifest backend SDK.\n  const competitor = await manifest\n    .from('competitors')\n    .findOneById(req.params['id'])\n\n  // Add 1 to the competitor score.\n  const newScore = competitor.score + 1\n\n  // Patch the record (changing only specified prop \"score\").\n  await manifest.from('competitors').patch(competitor.id, {\n    score: newScore\n  })\n\n  // Return updated score.\n  res.json({ newScore })\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The custom endpoint increases the score of a competitor. The path integrates an ",(0,i.jsx)(n.code,{children:"id"})," route param that we can use as ",(0,i.jsx)(n.code,{children:"req.params['id']"})," from our handler."]}),"\n",(0,i.jsxs)(n.p,{children:["Note the third argument in our function. This is the Manifest backend SDK that allow you to do CRUD operations in your app using the same syntax as the ",(0,i.jsx)(n.a,{href:"/docs/crud#using-the-javascript-sdk",children:"JS SDK"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>o});var s=t(6540);const i={},r=s.createContext(i);function d(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);